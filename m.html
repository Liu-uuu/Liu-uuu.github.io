<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>生活小助手--移动端首页</title>
	<script>
		var thisHtml=document.getElementsByTagName('html');
		var deviceW=document.documentElement.clientWidth;
		thisHtml[0].style.fontSize=deviceW/3.75+"px";
	</script>
	<style type="text/css">
	/*	html,body{
			height:100%;
		}*/
		body{
			margin:0;
			font-size:0.12rem;
		}
		ul,li{
			margin:0; padding:0; list-style:none;
		}
		/*顶部*/
		#tip{
			background:#2196F3;
			font-size:0.16rem; color:#fff; line-height:0.36rem;
		}

		/*天气*/
		#weather{
			height:1.2rem; background:#eee;
		}

		/*搜索*/
		#search{
			height:1.72rem; border:1px solid #ccc;
			overflow:auto;
		}
		#list ul{
			padding:0.06rem;
			font-size:0;
		}
		#list li{
			width:25%; padding:0.06rem 0;
			display: inline-block; text-align:center;
		}
		#list img{
			width:0.5rem; height:0.5rem; border-radius:0.25rem;
		}
		#list p{
			padding:0.04rem 0 0 0; margin:0;
			font-size: 0.12rem;
		}

		#box{
			font-size:0; text-align:center; display: none;
			margin-top:0.56rem;
		}
		#box input{
			padding:0.06rem;
			font-size:0.14rem; vertical-align:middle;
		}
		#box .txt{
			width:2.6rem; margin-bottom:0.1rem; background: no-repeat 0.04rem center; background-size: 0.18rem;
			text-indent:0.18rem;
		}
		#box .btn{
			margin:0 0.15rem;
		}

		/*笑话*/
		#happy{
			padding:0 0.2rem;
		}
		#happy h3{
			font-size:0.18rem;
		}
		#happy p{
			font-size:0.16rem;line-height:1.5;
		}

		/*底部*/
		#footer{
			width:100%; background:#fefefe;
			position:fixed; bottom:0; left:0;
			box-shadow:0 -1px 6px #ccc;
		}
		#footer span{
			display:inline-block;
			width:25%;
			text-align:center;
		}
		#footer a{
			display:block;
			border-right:1px solid #eee;
			font-size:0.16rem; font-weight:normal; line-height:0.4rem; text-decoration:none; color:#000;
		}
	</style>
</head>
<body>

<div id="tip">
	<span>欢迎来到我的GitHub个人主页！</span>
</div>

<div id="weather">
	天气轮播
</div>

<div id="search">
	<div id="list">
	</div>
	<div id="box">
		<input type="text" class="txt">
		<div><input type="button" value="返&nbsp&nbsp回" class="btn"><input type="button" class="btn"></div>
	</div>
</div>

<div id="happy">
	<h3>每日笑话|为生活添乐趣</h3>
	<p>尴尬了!!!是你的网太慢了还是我的服务器出问题了呢？</p>
</div>

<div id="footer">
	<span><a href="./m.html">首页</a></span><span><a href="./tq.html">天气</a></span><span><a href="./news.html">新闻</a></span><span><a href="./2048.html">小游戏</a></span>
</div>





<script type="text/javascript">

	//数据
	var search=[	
		{
			title:"搜豆瓣",
			url:function(val) {return "https://www.douban.com/search?q="+val},
			img:"https://img3.doubanio.com/f/frodo/144e6fb7d96701944e7dbb1a9bad51bdb1debe29/pics/app/logo.png"
		},
		{
			title:"搜知乎",
			url:function(val) {return "https://www.zhihu.com/search?type=content&q="+val},
			img:"https://ww4.sinaimg.cn/mw690/718878b5jw8enn0r74tgdj2050050mx4.jpg"
		},
		{
			title:"搜果壳",
			url:function(val) {return "https://www.guokr.com/search/all/?wd="+val+"&sort=&term=False"},
			img:"https://ww2.sinaimg.cn/mw690/74f67c55jw1di8x8lskt6j.jpg"
		},
		{
			title:"搜地图",
			url:function(val) {return "https://api.map.baidu.com/geocoder?address="+val+"&output=html&src=app"},
			img:"https://tva1.sinaimg.cn/crop.0.0.512.512.180/6b3da363jw8ezvssbsk7vj20e80e8aal.jpg"
		},
		{
			title:"百度搜索",
			url:function(val) {return "https://www.baidu.com/s?ie=UTF-8&wd="+val},
			img:"https://ss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/wisegame/pic/item/b42a6059252dd42a85580f7d0b3b5bb5c8eab897.jpg"
		},
		{
			title:"搜知道",
			url:function(val) {return "https://zhidao.baidu.com/search?word="+val},
			img:"https://tva4.sinaimg.cn/crop.0.0.499.499.180/622fca3djw1exmhbgqksyj20dw0dwjsa.jpg"
		},
		{
			title:"搜文库",
			url:function(val) {return "http://wenku.baidu.com/search?word="+encodeURI(val)},
			img:"https://ss3.bdstatic.com/-Po3dSag_xI4khGkpoWK1HF6hhy/wisegame/pic/item/fb22720e0cf3d7ca40639692fa1fbe096a63a9b9.jpg"
		},
		{
			title:"搜百科",
			url:function(val) {return "https://baike.baidu.com/item/"+val},
			img:"https://tva1.sinaimg.cn/crop.285.285.930.930.180/622f00edjw1e8m8ns3b37j215o15o49u.jpg"
		}	
	];

	//搜索
	(function(){
		var listBox=document.getElementById('list');
		var searchBox=document.getElementById('box');
		var thisHtml="";
		for (var i = 0; i < search.length; i++) {
			thisHtml+="<li><img src="+search[i].img+"></img><p>"+search[i].title+"</p></li>";
		}
		thisHtml="<ul>"+thisHtml+"</ul>";
		listBox.innerHTML=thisHtml;

		var lis=listBox.getElementsByTagName('li');
		var ipts=searchBox.getElementsByTagName('input');
		for (var i = 0; i < search.length; i++) {
			(function(i){
				lis[i].onclick=function(){
					searchBox.style.display="block";
					listBox.style.display="none";
					ipts[0].focus();
					ipts[0].style.backgroundImage="url("+search[i].img+")"
					ipts[2].value=search[i].title;

					ipts[2].onclick=function(){
						window.open(search[i].url(ipts[0].value))
					}
					ipts[1].onclick=function(){
						searchBox.style.display="none";
						listBox.style.display="block";
					}
				}
			})(i)
		}
	})();


	//笑话
	(function happyData(page){
		var contentlist="";
		if (contentlist) {
			document.getElementById('happy').innerHTML="<h3>每日笑话|为生活添乐趣</h3><p>"+contentlist[0].text+"</p>";
		}
		var xhr=new XMLHttpRequest();
		xhr.open('get','https://apis.baidu.com/showapi_open_bus/showapi_joke/joke_text?page='+page+'',true);
		xhr.setRequestHeader('apikey','770651441b1a9c317ead81b8a9137436');
		xhr.send();
		xhr.onreadystatechange=function(){
			if (xhr.readyState==4) {
				if (xhr.status==200) {
					var data=JSON.parse(xhr.responseText);
					if (data.showapi_res_error=="") {
						contentlist=data.showapi_res_body.contentlist
						document.getElementById('happy').innerHTML="<h3>每日笑话|为生活添乐趣</h3><p>"+contentlist[0].text+"</p>";
						// setInterval(function(){
						// 	document.getElementById('happy').innerHTML="<h3>每日笑话|为生活添乐趣</h3><p>"+contentlist[Math.floor(Math.random()*contentlist.length)].text+"</p>";
						// },15000)
					}
				}
			}
		}
	})(1);
	



	
</script>



</body>
</html>
