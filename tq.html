<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">
	<title>JXXL-天气</title>
	<script>
		var thisHtml=document.getElementsByTagName('html');
		var deviceW=document.documentElement.clientWidth;
		thisHtml[0].style.fontSize=deviceW/3.75+"px";
	</script>
	<style type="text/css">

		html,body{
			height: 100%;
		}
		body,ul,li{
			margin: 0;
			padding: 0;
			font-size: 0.16rem;
			color: #fff;
		}
		ul{
			list-style: none;
		}
	/*	#container{
			background: #0D5AA5;
		}*/
		
		.topmsg .city{
			line-height: 0.4rem;
			font-size: 0.18rem;
			text-align: center;
			background: #0D5AA5;
		}


		#today{
			position: relative;
			background: #2684C5;
		}
		.time{
			width: 1.2rem;
			border:1px solid #5FA3E4; 
			line-height: 0.36rem;
			font-size: 0.18rem;
			text-align: center;
			position: absolute;
			right: 0.1rem;
			top: 0.1rem;

		}
		.time span{
			display: block;
		}
		.time .date{
			font-size: 0.40rem;
			font-weight: bold;
		}

		.today_wea{
			padding:0.2rem 0.3rem;
		}
		.today_wea span{
			display: block;
			line-height: 0.26rem;
		}
		.today_wea .wea_tem{
			font-size:0.5rem;
			line-height: 0.44rem;
		}

		.twodays{
			border-top: 1px solid #5FA3E4;
			border-bottom: 1px solid #5FA3E4;
			position: relative;
		}
		.twodays strong{
			float: right;
		}
		.yesterday{
			width: 40%;
			padding: 0.1rem 0.2rem;
		}
		.tomorrow{
			width: 40%;
			padding: 0.1rem 0.2rem;
			border-left: 1px solid #5FA3E4;
			position: absolute;
			top: 0;
			right: 0;
		}
		.twodays strong{
			text-align: right;
		}


		.tab_btn{
			border-bottom: 1px solid #5FA3E4;
			background: #2684C5;
		}
		.tab_btn span{
			height: 0.3rem;
			padding: 0.06rem;
			font-size: 0.16rem;
			line-height: 0.3rem;
			display: inline-block;
		}
		.tab_btn span.active{
			background: #5FA3E4;
		}
		.tab_body{
			background: #0D5AA5;
		}
		.tab_today{
			/*display: none;*/
		}
		.tab_today ul{
			text-align: center;
			font-size: 0;
		}
		.tab_today li{
			display: inline-block;
			width:1.64rem;
			height: 1.56rem;
			border: 1px solid #5FA3E4;
			padding:0.1rem 0.1rem;
			/*font-size: 0; */
			text-align: center;
			overflow: hidden;
		}
		.tab_today li span{
			display: block;
			padding: 0.02rem;
		}
		.tab_allday{
			display: none;
		}
		.tab_allday li{
			display: inline-block;
			border: 1px solid red;
		}


	</style>
</head>
<body>
<div id="container">

	<div class="topmsg">
	    <div class="city">当前：北京市</div>

	</div>

	<div id="today">

	    <div class="today_wea" id="today_wea">
		    <span class="wea_type">加载中</span>
		    <span class="wea_tem">加载中</span>
		    <span class="wea_wind">加载中</span>
	        <span class="wea_wind">加载中</span>
	    </div>

	    <div class="time" id="time">
		    <span class="week">星期</span>
		    <span class="date">00:00</span>
		    <span class="ym">0月0日</span>	    
	    </div>

	    <div class="twodays">
	        <div class="yesterday" id="yesterday">
	            <div>
	                <b>昨天</b>
	                <strong>19 / 27°</strong>
	            </div>
	            <div>
		            <b>加载中</b>
	                <strong>加载中</strong>
	            </div>
	        </div>

	        <div class="tomorrow" id="tomorrow">
	            <div>
	                <b>明天</b>
	                <strong>加载中/加载中</strong>
	            </div>
	            <div>
		            <b>加载中</b>
	                <strong>加载中</strong>
	            </div>
	        </div>

	    </div>

	</div>








	<div class="tab">

	    <div class="tab_btn">
	        <span class="active">今日天气详情</span>
	        <span><!-- 未来7天天气 --></span>
	    </div>

	    <div class="tab_body">
	        <div class="tab_today">
	            <ul>
	                <li>
	                    <span><img src="http://cdn.moji.com/mtianqi/assets/images/script/20.png"></span>
	                    <div id="cy"><apan>穿衣 加载中</apan></div>
	                </li>
	                <li>
	                    <span><img src="http://cdn.moji.com/mtianqi/assets/images/script/21.png"></span>
	                    <div id="fs"><apan>紫外线 加载中</apan></div>
	                </li>
	            </ul>
                <ul>
	                <li>
	                    <span><img src="http://cdn.moji.com/mtianqi/assets/images/script/26.png"></span>
	                    <div id="yd"><apan>运动 加载中</apan></div>
	                </li>
	                <li>
	                    <span><img src="http://cdn.moji.com/mtianqi/assets/images/script/17.png"></span>
	                    <div id="xc"><apan>洗车 加载中</apan></div>
	                </li>
	            </ul>
	        </div>
	    </div>

	    <div class="tab_allday">
	        <div class="weak_wea">
	            <ul>
	                <li data-high="29" data-low="17">

	                    <em>周六</em>
	                    <dl class="wea">
	                        <dt><img src="http://cdn.moji.com/mtianqi/assets/images/wea/w4.png" alt="" /></dt>
	                        <dd><strong>雷阵雨</strong></dd>
	                    </dl>
	                    <dl class="wind">
	                        <dd>北风</dd>
	                        <dd>3级</dd>
	                    </dl>

	                </li>

	                <li data-high="27" data-low="19">

	                    <em>周日</em>
	                    <dl class="wea">
	                        <dt><img src="http://cdn.moji.com/mtianqi/assets/images/wea/w2.png" alt="" /></dt>
	                        <dd><strong>阴</strong></dd>
	                    </dl>
	                    <dl class="wind">
	                        <dd>北风</dd>
	                        <dd>3级</dd>
	                    </dl>

	                </li>
	            </ul>

	        </div>
	    </div>



	</div>
</div>
<script type="text/javascript">
	var today=document.getElementById('today_wea');
	var yesterday=document.getElementById('yesterday');
	var tomorrow=document.getElementById('tomorrow');
	var cy=document.getElementById('cy');
	var fs=document.getElementById('fs');
	var yd=document.getElementById('yd');
	var xc=document.getElementById('xc');
	var timeDiv=document.getElementById('time');

	var date;
	var xhr=new XMLHttpRequest();
	xhr.open('get','http://apis.baidu.com/apistore/weatherservice/recentweathers?cityname=北京',true);
	xhr.setRequestHeader('apikey','770651441b1a9c317ead81b8a9137436')
	xhr.send();
	xhr.onreadystatechange=function(){
		if (xhr.readyState==4) {
			if (xhr.status==200) {
				date=JSON.parse(xhr.responseText);
				// console.log(date)
				today.innerHTML="<span class="+"wea_type"+">"+date.retData.today.type+"</span>"+
		    "<span class="+"wea_tem"+">"+date.retData.today.curTemp+"</span>"+
		    "<span class="+"wea_wind"+">"+date.retData.today.fengxiang+date.retData.today.fengli+"</span>"+
	        "<span class="+"wea_temp"+">"+"温度最低"+date.retData.today.lowtemp+"/最高"+date.retData.today.hightemp+"</span>";
	        	yesterday.innerHTML="<div><b>昨天</b><strong>"+date.retData.history[6].lowtemp+"/"+date.retData.history[6].hightemp+"</strong></div><div><b>"+date.retData.history[6].week+"</b><strong>"+date.retData.history[6].type+"</strong></div>";
	        	tomorrow.innerHTML="<div><b>明天</b><strong>"+date.retData.forecast[0].lowtemp+"/"+date.retData.forecast[0].hightemp+"</strong></div><div><b>"+date.retData.forecast[0].week+"</b><strong>"+date.retData.forecast[0].type+"</strong></div>";
	        	cy.innerHTML="<span>穿衣指数:"+date.retData.today.index[2].index+"</span><span>"+date.retData.today.index[2].details+"</span>";
	        	fs.innerHTML="<span>紫外线指数:"+date.retData.today.index[1].index+"</span><span>"+date.retData.today.index[1].details+"</span>";
	        	yd.innerHTML="<span>运动指数:"+date.retData.today.index[3].index+"</span><span>"+date.retData.today.index[3].details+"</span>";
	        	xc.innerHTML="<span>洗车线指数:"+date.retData.today.index[4].index+"</span><span>"+date.retData.today.index[4].details+"</span>";
			}	
		}
	}
	var week=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]
	setInterval(settime,60000);
	settime()
	function settime(){
		var newtime=new Date();
		timeDiv.innerHTML="<span class="+"week"+">"+week[newtime.getDay()]+"</span><span class="+"date"+">"+newtime.getHours()+":"+newtime.getMinutes()+"</span><span class="+"ym"+">"+(newtime.getMonth()+1)+"月"+newtime.getDate()+"日</span>";
		// console.log(newtime.getTime())	
	}
	
  
</script>
</body>
</html>