<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">
	<link rel="shortcut icon"  href="myicon.png">
	<title>天气-JXXL</title>
	
	<script>
		var thisHtml=document.getElementsByTagName('html');
		var deviceW=document.documentElement.clientWidth;
		thisHtml[0].style.fontSize=deviceW/3.75+"px";
	</script>
	<style type="text/css">

		html,body{
			height: 100%;
		}
		body,ul,li,h3,h4,p{
			margin: 0;
			padding: 0;
			font-size: 0.16rem;
		}
		body{
			padding-bottom:0.5rem;
			background:#f0f0f0;
		}
		ul{
			list-style: none;
		}
	
		#top{
			width:100%; background: #0D5AA5;
			font-size: 0.16rem; line-height: 0.36rem; text-align: center; color: #fff;
			position:fixed;
		}
		/*更多*/
		#more{
			position:absolute;left:4px;
		}
		/*css3图标*/
		#top .css3-icon{
			display:inline-block;
			width:0.15rem; height:0.03rem; background:#fff; padding:0.02rem 0; margin-right:4px;
			border-top:0.03rem solid #fff; border-bottom:0.03rem solid #fff;
			background-clip:content-box;	
		}

		#weather{
			padding-top:0.36rem;
		}
		/*更新时间*/
		#updateTime{
			padding:6px; background:#fff; margin-bottom:0.06rem;
			text-align:right;
		}

		/*实况天气*/
		#sktq{
			padding:0.06rem;
		}
		#sktq p{
			padding-left:0.3rem;
		}
		#sktq .tmp{
			font-size:0.5rem;
		}

		/*空气质量*/
		#kqzl{
			padding:0.06rem;
		}
		#kqzl h4{
			text-align:center;
		}
		#kqzl p{
			display:inline-block;
			width:16.6%; border-top:1px solid #ccc;
		}
		#kqzl span{
			display:block;
			border-bottom:1px solid #ccc;
			font-size:0.14rem; text-align:center;
		}


		/*生活指数*/
		#shzs ul{
			width:95%; margin:0 auto;
			font-size:0; color:#fff;
		}
		#shzs li{
			display:inline-block;
			width:33.33%;
		}
		#shzs div{
			padding:0.08rem; margin:0.01rem; /*border-radius:0.1rem;*/ background:#00BCD4;
		}
		#shzs h4{
			text-align:center;
		}
		#shzs p{
			height:0.6rem;
			overflow:auto;
		}
		/*底部*/
		#footer{
			width:100%; background:#fefefe;
			box-shadow:0 -1px 6px #ccc; font-size:0;
			position:fixed; bottom:0; left:0;
		}
		#footer span{
			display:inline-block;
			width:25%;
			text-align:center;
		}
		#footer a{
			display:block;
			border-right:1px solid #eee;
			font-size:0.16rem; font-weight:normal; line-height:0.4rem; text-decoration:none; color:#000;
		}
	</style>
</head>

<body>

	<div id="top">
	 	<div id="more"><span class="css3-icon"></span><span>更多</span></div>
		<span id="city">当前天气：北京市</span>
	</div>
	<!-- 天气信息 -->
	<div id="weather">

		<div id="updateTime">数据更新于:0000-00-00 00:00</div>
		<!-- 实况天气 -->
		<div style="background:#fff; margin-bottom:0.06rem; padding:0.06rem 0;">
			<h3>实况天气</h3>
			<div id="sktq">
				<p><span>温度|</span><span>天气状况</span></p>
				<p><span>相对湿度|</span><span>pm2.5|</span><span>空气质量</span></p>
				<p><span>风向|</span><span>风力</span></p>
			</div>
		</div>

		<!-- 空气质量 -->
		<div style="background:#fff; margin-bottom:0.06rem; padding:0.06rem 0;">
			<h3>空气污染物</h3>
			<div id="kqzl">
				<h4>空气污染物1小时平均值(单位:ug/m³)</h4>
				<div>
					<span>PM2.5|PM10|臭氧|一氧化碳|二氧化氮|二氧化硫|这些都是空气污染物呢</span>
				</div>
			</div>
		</div>

		<!-- 生活指数 -->
		<div id="shzs" style="background:#fff; margin-bottom:0.06rem; padding:0.06rem 0;">
			<h3>生活指数</h3>
			<ul>
				<li style="display: none;"></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>


	</div>


	<div id="footer">
		<span><a href="./m.html">首页</a></span>
		<span><a href="./tq.html">天气</a></span>
		<span><a href="./news.html">新闻</a></span>
		<span><a href="./2048.html">小游戏</a></span>
	</div>





	<script type="text/javascript">
		var data='';
		function requestData(fn){
			var xhr=new XMLHttpRequest();
			xhr.open('get','https://apis.baidu.com/heweather/weather/free?city=北京',true);
			xhr.setRequestHeader('apikey','770651441b1a9c317ead81b8a9137436');
			xhr.send();
			xhr.onreadystatechange=function(){
				if (xhr.readyState==4) {
					if (xhr.status==200) {
						data=JSON.parse(xhr.responseText)["HeWeather data service 3.0"][0];
						fn();
					}
				}
			}
		}
		
		
		var city=document.getElementById('city');
		var updateTime=document.getElementById('updateTime');

		var shzs=document.getElementById('shzs');
		requestData(function(){
			if (data.status=="ok") {
				//basic基本信息
				city.innerHTML="当前天气:"+data.basic.city;
				updateTime.innerHTML="数据更新于:"+data.basic.update.loc;

				//"实况天气"
				var sktqBox=document.getElementById('sktq');
				sktqBox.innerHTML="<p><span class='tmp'>"+data.now.tmp+"℃</span><span class='condTxt'>"+data.now.cond.txt+"</span></p>"+
				"<p><span  class='hum'>湿度"+data.now.hum+"%|</span><span class='qlty'>空气质量:"+data.aqi.city.qlty+"</span></p>"+
				"<p><span class='dir'>"+data.now.wind.dir+"</span><span class='sc'>"+data.now.wind.sc+"级</span></p>";
			
			
				//"空气污染物"
				var kqzlBox=document.getElementById('kqzl');
				kqzlBox.innerHTML=
				"<table>"+
					"<h4>空气污染物1小时平均值(单位:ug/m³)</h4>"+
					"<div>"+
						"<p><span>PM2.5</span><span>"+data.aqi.city.pm25+"</span></p>"+
						"<p><span>PM10</span><span>"+data.aqi.city.pm10+"</span></p>"+
						"<p><span>臭氧</span><span>"+data.aqi.city.o3+"</span></p>"+
						"<p><span>一氧化碳</span><span>"+data.aqi.city.co+"</span></p>"+
						"<p><span>二氧化氮</span><span>"+data.aqi.city.no2+"</span></p>"+
						"<p><span>二氧化硫</span><span>"+data.aqi.city.so2+"</span></p>"+
					"</div>"+

				"</table>"

				
				//生活指数
				var ii=0;
				var attr2=attr
				for(var attr in data.suggestion){
					
					switch(attr){
						case "comf":
							attr2="舒适度指数"
							break;
						case "cw":
							attr2="洗车指数"
							break;
						case "drsg":
							attr2="穿衣指数"
							break;
						case "flu":
							attr2="感冒指数"
							break;
						case "sport":
							attr2="运动指数"
							break;
						case "trav":
							attr2="旅游指数"
							break;
						case "uv":
							attr2="紫外线指数"
							break;
						default:
							console.log("有新数据");
					}
					shzs.getElementsByTagName('li')[ii].innerHTML="<div><h4>"+attr2+"<br/>"+data.suggestion[attr].brf+"</h4><p>"+data.suggestion[attr].txt+"</p></div>";
					ii++;
				}
			}else{
				alert("服务器返回信息："+data.status)
			}
		})

		
	
		
	
	  
	</script>

</body>
</html>