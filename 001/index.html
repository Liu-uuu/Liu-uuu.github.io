<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body style="background: #ccc; margin: 0; padding: 0;">

<img id="tulip" src="./1.jpg" alt="The Tulip" style="display: none" />
<canvas id="myCanvas" width="600" height="980">
Your browser does not support the HTML5 canvas tag.
</canvas>
<img src="" alt="" id="img0">
</body>
<script>
	var c=document.getElementById("myCanvas");
	var ctx=c.getContext("2d");
	var img=document.getElementById("tulip");

window.onload=function (tototo) {
	// ?00-100-2018-10-01
	
	var ab={
		formDate:{
			yue:[0,"A","B","C","D","E","F","G","H","I","J","K","L"],
			ri:[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V"]
		},

		zhh:[
			{
				hm:["上海陆家嘴国际金融资产交","易市场股份有限公司"],
				zhh:"4420 **** **** **** 1788",
				khh:"中国建设银行",
			},
			{
				hm:["上海陆金所互联网金融信息","服务有限公司存管专户"],
				zhh:"1507 **** **05 25",
				khh:"平安银行上海分行营业部",
			},	
			{
				hm:["前海金牛贷（深圳）互联网","金融服务有限公司存管专用","户"],
				zhh:"1500 **** **91 20",
				khh:"平安银行",
			}
		]
	}
	var data={
		zhh:0,
		qian:0.00,
		liushui:"",
		nian:2018,
		yue:10,
		ri:01
	};
	if(window.location.search){
		var abc=window.location.search.split("-");
		data={
				qian:abc[1],
				nian:abc[2],
				yue:abc[3],
				ri:abc[4],
			}
	}
	
	
	ctx.drawImage(img,0,0);
	ctx.font="28px '黑体'";
	ctx.textAlign="end";
	ctx.textBaseline="top";
	var gao=284;
	// 收款户名
	var num=abc[5];
	
	ctx.fillText(ab.zhh[num].hm[0],564,gao);
	gao=gao+44;
	ctx.fillText(ab.zhh[num].hm[1],564,gao);
	gao=gao+44;
	// 收款账号
	ctx.fillText(ab.zhh[num].zhh,564,gao);
	gao=gao+44;
	// 收款银行
	ctx.fillText(ab.zhh[num].khh,564,gao);
	gao=gao+44;
	// 转账金额
	ctx.fillText(data.qian+"元",564,gao);
	gao=gao+44;
	// 付款户名
	ctx.fillText("陈晓",564,gao);
	gao=gao+44;
	// 付款账号
	ctx.fillText("6214 **** **** 6688",564,gao);
	gao=gao+44;
	// 流水号
	ctx.fillText("PI"+(data.nian-2000)+ab.formDate.yue[data.yue*1]+ab.formDate.ri[data.ri*1]+"B"+(Math.ceil(new Date().getTime()*0.00033)),564,gao);
	gao=gao+44;
	// 交易时间
	ctx.fillText(data.nian+"年"+data.yue+"月"+data.ri+"日",564,gao);
	
	// document.getElementById("img0").src=c.toDataURL();
		
	// document.onclick=function(){
	// 	console.log(1111)
	// 	var aaa=c.toDataURL();
	// };
	// document.getElementById("img0").src=c.toDataURL();
	// console.log(c.toDataURL());
};
// document.onclick=function(){
	// document.getElementById("img0").src=c.toDataURL();
// };
</script>
</html>